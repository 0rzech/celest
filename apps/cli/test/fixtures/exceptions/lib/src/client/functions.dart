// Generated by Celest. This file should not be modified manually, but
// it can be checked into version control.
// ignore_for_file: type=lint, unused_local_variable, unnecessary_cast, unnecessary_import

library;

import 'dart:convert';

import 'package:celest/celest.dart';
import 'package:celest_backend/exceptions.dart';
import 'package:celest_core/src/exception/cloud_exception.dart';

import '../../client.dart';

class CelestFunctions {
  /// A library with methods that do not through but call methods that do throw.
  final nonthrowing = CelestFunctionsNonthrowing();

  final throwing = CelestFunctionsThrowing();
}

/// A library with methods that do not through but call methods that do throw.
class CelestFunctionsNonthrowing {
  Never _handleError({
    required int $statusCode,
    required Map<String, Object?> $body,
  }) {
    final $error = ($body['error'] as Map<String, Object?>);
    final $code = ($error['code'] as String);
    final $details = ($error['details'] as Map<String, Object?>?);
    switch ($code) {
      case r'BaseException':
        throw Serializers.instance.deserialize<BaseException>($details);
      case r'CustomException':
        throw Serializers.instance.deserialize<CustomException>($details);
      case r'BaseError':
        throw Serializers.instance.deserialize<BaseError>($details);
      case r'CustomError':
        throw Serializers.instance.deserialize<CustomError>($details);
      case r'BadRequestException':
        throw Serializers.instance.deserialize<BadRequestException>($details);
      case r'InternalServerException':
        throw Serializers.instance
            .deserialize<InternalServerException>($details);
      case _:
        switch ($statusCode) {
          case 400:
            throw BadRequestException($code);
          case _:
            throw InternalServerException($code);
        }
    }
  }

  Future<void> callsThrowsCustomError() async {
    final $response = await celest.httpClient.post(
      celest.baseUri.resolve('/nonthrowing/calls-throws-custom-error'),
      headers: const {'Content-Type': 'application/json; charset=utf-8'},
    );
    final $body = (jsonDecode($response.body) as Map<String, Object?>);
    if ($response.statusCode != 200) {
      _handleError(
        $statusCode: $response.statusCode,
        $body: $body,
      );
    }
    return;
  }

  Future<void> callsThrowsBaseError() async {
    final $response = await celest.httpClient.post(
      celest.baseUri.resolve('/nonthrowing/calls-throws-base-error'),
      headers: const {'Content-Type': 'application/json; charset=utf-8'},
    );
    final $body = (jsonDecode($response.body) as Map<String, Object?>);
    if ($response.statusCode != 200) {
      _handleError(
        $statusCode: $response.statusCode,
        $body: $body,
      );
    }
    return;
  }

  Future<void> callsThrowsCustomException() async {
    final $response = await celest.httpClient.post(
      celest.baseUri.resolve('/nonthrowing/calls-throws-custom-exception'),
      headers: const {'Content-Type': 'application/json; charset=utf-8'},
    );
    final $body = (jsonDecode($response.body) as Map<String, Object?>);
    if ($response.statusCode != 200) {
      _handleError(
        $statusCode: $response.statusCode,
        $body: $body,
      );
    }
    return;
  }

  Future<void> callsThrowsBaseException() async {
    final $response = await celest.httpClient.post(
      celest.baseUri.resolve('/nonthrowing/calls-throws-base-exception'),
      headers: const {'Content-Type': 'application/json; charset=utf-8'},
    );
    final $body = (jsonDecode($response.body) as Map<String, Object?>);
    if ($response.statusCode != 200) {
      _handleError(
        $statusCode: $response.statusCode,
        $body: $body,
      );
    }
    return;
  }
}

class CelestFunctionsThrowing {
  Never _handleError({
    required int $statusCode,
    required Map<String, Object?> $body,
  }) {
    final $error = ($body['error'] as Map<String, Object?>);
    final $code = ($error['code'] as String);
    final $details = ($error['details'] as Map<String, Object?>?);
    switch ($code) {
      case r'BaseException':
        throw Serializers.instance.deserialize<BaseException>($details);
      case r'CustomException':
        throw Serializers.instance.deserialize<CustomException>($details);
      case r'BaseError':
        throw Serializers.instance.deserialize<BaseError>($details);
      case r'CustomError':
        throw Serializers.instance.deserialize<CustomError>($details);
      case r'BadRequestException':
        throw Serializers.instance.deserialize<BadRequestException>($details);
      case r'InternalServerException':
        throw Serializers.instance
            .deserialize<InternalServerException>($details);
      case _:
        switch ($statusCode) {
          case 400:
            throw BadRequestException($code);
          case _:
            throw InternalServerException($code);
        }
    }
  }

  Future<void> throwsCustomError() async {
    final $response = await celest.httpClient.post(
      celest.baseUri.resolve('/throwing/throws-custom-error'),
      headers: const {'Content-Type': 'application/json; charset=utf-8'},
    );
    final $body = (jsonDecode($response.body) as Map<String, Object?>);
    if ($response.statusCode != 200) {
      _handleError(
        $statusCode: $response.statusCode,
        $body: $body,
      );
    }
    return;
  }

  Future<void> throwsBaseError() async {
    final $response = await celest.httpClient.post(
      celest.baseUri.resolve('/throwing/throws-base-error'),
      headers: const {'Content-Type': 'application/json; charset=utf-8'},
    );
    final $body = (jsonDecode($response.body) as Map<String, Object?>);
    if ($response.statusCode != 200) {
      _handleError(
        $statusCode: $response.statusCode,
        $body: $body,
      );
    }
    return;
  }

  Future<void> throwsCustomException() async {
    final $response = await celest.httpClient.post(
      celest.baseUri.resolve('/throwing/throws-custom-exception'),
      headers: const {'Content-Type': 'application/json; charset=utf-8'},
    );
    final $body = (jsonDecode($response.body) as Map<String, Object?>);
    if ($response.statusCode != 200) {
      _handleError(
        $statusCode: $response.statusCode,
        $body: $body,
      );
    }
    return;
  }

  Future<void> throwsBaseException() async {
    final $response = await celest.httpClient.post(
      celest.baseUri.resolve('/throwing/throws-base-exception'),
      headers: const {'Content-Type': 'application/json; charset=utf-8'},
    );
    final $body = (jsonDecode($response.body) as Map<String, Object?>);
    if ($response.statusCode != 200) {
      _handleError(
        $statusCode: $response.statusCode,
        $body: $body,
      );
    }
    return;
  }
}
