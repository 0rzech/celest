{
  "name": "auth",
  "apis": {
    "lib": {
      "name": "lib",
      "functions": {
        "sayHelloAuthenticated": {
          "name": "sayHelloAuthenticated",
          "route": "/lib/say-hello-authenticated",
          "apiName": "lib",
          "envVars": [],
          "policySet": {
            "policies": {
              "Celest::CloudFunction::sayHelloAuthenticated_authenticated_0": {
                "effect": "permit",
                "principal": {
                  "op": "in",
                  "entity": {
                    "type": "Celest::Role",
                    "id": "$authenticated"
                  }
                },
                "action": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::Action",
                    "id": "invoke"
                  }
                },
                "resource": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::CloudFunction",
                    "id": "lib.sayHelloAuthenticated"
                  }
                },
                "conditions": []
              },
              "Celest::CloudFunction::sayHelloAuthenticated_authenticated_1": {
                "effect": "forbid",
                "principal": {
                  "op": "All"
                },
                "action": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::Action",
                    "id": "invoke"
                  }
                },
                "resource": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::CloudFunction",
                    "id": "lib.sayHelloAuthenticated"
                  }
                },
                "conditions": [
                  {
                    "kind": "unless",
                    "body": {
                      "in": {
                        "left": {
                          "Var": "principal"
                        },
                        "right": {
                          "Value": {
                            "__entity": {
                              "type": "Celest::Role",
                              "id": "$authenticated"
                            }
                          }
                        }
                      }
                    }
                  }
                ]
              }
            },
            "templates": {}
          }
        },
        "streamHelloAuthenticated": {
          "name": "streamHelloAuthenticated",
          "route": "/lib/stream-hello-authenticated",
          "apiName": "lib",
          "envVars": [],
          "streamType": "unidirectionalServer",
          "policySet": {
            "policies": {
              "Celest::CloudFunction::streamHelloAuthenticated_authenticated_0": {
                "effect": "permit",
                "principal": {
                  "op": "in",
                  "entity": {
                    "type": "Celest::Role",
                    "id": "$authenticated"
                  }
                },
                "action": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::Action",
                    "id": "invoke"
                  }
                },
                "resource": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::CloudFunction",
                    "id": "lib.streamHelloAuthenticated"
                  }
                },
                "conditions": []
              },
              "Celest::CloudFunction::streamHelloAuthenticated_authenticated_1": {
                "effect": "forbid",
                "principal": {
                  "op": "All"
                },
                "action": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::Action",
                    "id": "invoke"
                  }
                },
                "resource": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::CloudFunction",
                    "id": "lib.streamHelloAuthenticated"
                  }
                },
                "conditions": [
                  {
                    "kind": "unless",
                    "body": {
                      "in": {
                        "left": {
                          "Var": "principal"
                        },
                        "right": {
                          "Value": {
                            "__entity": {
                              "type": "Celest::Role",
                              "id": "$authenticated"
                            }
                          }
                        }
                      }
                    }
                  }
                ]
              }
            },
            "templates": {}
          }
        },
        "sayHelloPublic": {
          "name": "sayHelloPublic",
          "route": "/lib/say-hello-public",
          "apiName": "lib",
          "envVars": [],
          "policySet": {
            "policies": {
              "Celest::CloudFunction::sayHelloPublic_public_0": {
                "effect": "permit",
                "principal": {
                  "op": "All"
                },
                "action": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::Action",
                    "id": "invoke"
                  }
                },
                "resource": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::CloudFunction",
                    "id": "lib.sayHelloPublic"
                  }
                },
                "conditions": []
              }
            },
            "templates": {}
          }
        },
        "streamHelloPublic": {
          "name": "streamHelloPublic",
          "route": "/lib/stream-hello-public",
          "apiName": "lib",
          "envVars": [],
          "streamType": "unidirectionalServer",
          "policySet": {
            "policies": {
              "Celest::CloudFunction::streamHelloPublic_public_0": {
                "effect": "permit",
                "principal": {
                  "op": "All"
                },
                "action": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::Action",
                    "id": "invoke"
                  }
                },
                "resource": {
                  "op": "==",
                  "entity": {
                    "type": "Celest::CloudFunction",
                    "id": "lib.streamHelloPublic"
                  }
                },
                "conditions": []
              }
            },
            "templates": {}
          }
        },
        "sayHello": {
          "name": "sayHello",
          "route": "/lib/say-hello",
          "apiName": "lib",
          "envVars": []
        },
        "streamHello": {
          "name": "streamHello",
          "route": "/lib/stream-hello",
          "apiName": "lib",
          "envVars": [],
          "streamType": "unidirectionalServer"
        }
      }
    },
    "authenticated_lib": {
      "name": "authenticated_lib",
      "functions": {
        "sayHello": {
          "name": "sayHello",
          "route": "/authenticated-lib/say-hello",
          "apiName": "authenticated_lib",
          "envVars": []
        },
        "streamHello": {
          "name": "streamHello",
          "route": "/authenticated-lib/stream-hello",
          "apiName": "authenticated_lib",
          "envVars": [],
          "streamType": "unidirectionalServer"
        }
      },
      "policySet": {
        "policies": {
          "Celest::CloudApi::authenticated_lib_authenticated_0": {
            "effect": "permit",
            "principal": {
              "op": "in",
              "entity": {
                "type": "Celest::Role",
                "id": "$authenticated"
              }
            },
            "action": {
              "op": "==",
              "entity": {
                "type": "Celest::Action",
                "id": "invoke"
              }
            },
            "resource": {
              "op": "in",
              "entity": {
                "type": "Celest::CloudApi",
                "id": "authenticated_lib"
              }
            },
            "conditions": []
          },
          "Celest::CloudApi::authenticated_lib_authenticated_1": {
            "effect": "forbid",
            "principal": {
              "op": "All"
            },
            "action": {
              "op": "==",
              "entity": {
                "type": "Celest::Action",
                "id": "invoke"
              }
            },
            "resource": {
              "op": "in",
              "entity": {
                "type": "Celest::CloudApi",
                "id": "authenticated_lib"
              }
            },
            "conditions": [
              {
                "kind": "unless",
                "body": {
                  "in": {
                    "left": {
                      "Var": "principal"
                    },
                    "right": {
                      "Value": {
                        "__entity": {
                          "type": "Celest::Role",
                          "id": "$authenticated"
                        }
                      }
                    }
                  }
                }
              }
            ]
          }
        },
        "templates": {}
      }
    },
    "public_lib": {
      "name": "public_lib",
      "functions": {
        "sayHello": {
          "name": "sayHello",
          "route": "/public-lib/say-hello",
          "apiName": "public_lib",
          "envVars": []
        },
        "streamHello": {
          "name": "streamHello",
          "route": "/public-lib/stream-hello",
          "apiName": "public_lib",
          "envVars": [],
          "streamType": "unidirectionalServer"
        }
      },
      "policySet": {
        "policies": {
          "Celest::CloudApi::public_lib_public_0": {
            "effect": "permit",
            "principal": {
              "op": "All"
            },
            "action": {
              "op": "==",
              "entity": {
                "type": "Celest::Action",
                "id": "invoke"
              }
            },
            "resource": {
              "op": "in",
              "entity": {
                "type": "Celest::CloudApi",
                "id": "public_lib"
              }
            },
            "conditions": []
          }
        },
        "templates": {}
      }
    }
  },
  "envVars": [],
  "sdkInfo": {
    "sdkVersion": "3.4.3",
    "enabledExperiments": [],
    "featureFlags": [
      "streaming"
    ]
  },
  "auth": {
    "providers": [
      {
        "name": "email",
        "type": "email"
      }
    ]
  }
}